var ajax=function(){var a={createXMLHTTPObject:function(){for(var a=!1,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0,d=b.length;c<d;c++){try{a=b[c]()}catch(a){continue}break}return a},fetch:function(b,c){var d=a.createXMLHTTPObject();return d?(d.open("GET",b,!0),d.onreadystatechange=function(){if(4===d.readyState)return 200!==d.status&&304!==d.status?void c(new Error(d.status+" - "+d.statusText)):void c(null,d)},void(4!==d.readyState&&d.send(null))):void c(new Error("Failed to create XMLHttpResquest"))}};return{fetch:a.fetch}}(),lunr_plugin_excerpt=function(a,b,c){c=c||{},void 0===c.continuationIndicator&&(c.continuationIndicator="<span class='hellip'>&hellip;</span>"),void 0===c.contextWords&&(c.contextWords=10),void 0===c.separatorWords&&(c.separatorWords=c.contextWords),void 0===c.introWords&&(c.introWords=2*c.contextWords),void 0===c.excerptClass&&(c.excerptClass="excerpt"),void 0===c.bodyPropertyName&&(c.bodyPropertyName="body");var d={init:function(){this._search=a.search,a.search=this.search},escapeRegExp:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},getSearchTerms:function(b){var c=a.pipeline.run(a.tokenizerFn(b)),d=b.split(/\s+/);return c.forEach(function(a){~d.indexOf(a)||d.push(a)}),d},generateExcerpts:function(a,e){var f=d.getSearchTerms(a),g=f.sort(function(a,b){return b.length-a.length}).map(d.escapeRegExp).join("|");return e.forEach(function(a){var d,e=b[a.ref],f=e[c.bodyPropertyName],h=new RegExp("(?:(^\\W*(?:\\w+\\W+){0,"+c.contextWords+"}?)|((?:\\w+\\W+){"+c.contextWords+"}))((?:(?:"+g+")\\w*?(?:\\W+(?:\\w+\\W+){0,"+c.separatorWords+"}?))*(?:(?:"+g+")(?:\\w*)))(?:((?:\\W+\\w+){0,"+c.contextWords+"}?)\\W*$|((?:\\W+\\w+){"+c.contextWords+"}))","gi"),i=[],j="",k=!0;for(i.firstStartsAtTextStart=i.lastEndsAtTextEnd=!1;null!==(d=h.exec(f));){var l=void 0!==d[1],m=l?d[1]:d[2],n=d[3],o=void 0!==d[4],p=o?d[4]:d[5],q=m+n+p;k&&(l?i.firstStartsAtTextStart=l:j+=c.continuationIndicator,k=!1),j+=q,i.push(q),o?i.lastEndsAtTextEnd=o:j+=c.continuationIndicator}if(k){var r=new RegExp(g,"mi");if(null!==e.title&&r.exec(e.title)){var s=new RegExp("^\\W*(?:(?:((?:w+W+){0,"+(c.introWords-1)+"}?w+|)W*$)|((?:\\w+\\W+){"+c.introWords+"}))"),t=s.exec(f),u=null!=t[1]&&!!t[1].length,v=u?t[1]:t[2];i.firstStartsAtTextStart=!0,j=v,i.push(v),u?i.lastEndsAtTextEnd=!0:v+=c.continuationIndicator}}a.excerpts=i,a.excerptsHTML=j}),e},search:function(b){var c=d._search.call(a,b);return d.generateExcerpts(b,c)}};d.init()},lunr_plugin_highlight=function(a,b,c){c=c||{},void 0===c.continuationIndicator&&(c.continuationIndicator="<span class='hellip'>&hellip;</span>"),void 0===c.matchClass&&(c.matchClass="match"),void 0===c.bodyObjectName&&(c.bodyObjectName="raw"),void 0===c.bodyPropertyName&&(c.bodyPropertyName="body");var d={init:function(){this._search=a.search,a.search=this.search},escapeRegExp:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},getSearchTerms:function(b){var c=a.pipeline.run(a.tokenizerFn(b)),d=b.split(/\s+/);return c.forEach(function(a){~d.indexOf(a)||d.push(a)}),d},highlightMatches:function(a,e){var f=d.getSearchTerms(a),g=f.sort(function(a,b){return b.length-a.length}).map(d.escapeRegExp).join("|");return e.forEach(function(a){var d,e=b[a.ref],f="result"===c.bodyObjectName?a:e,h=c.bodyPropertyName;if(null!==(d=f[h])){var i=[],j="",k=new RegExp("\\b("+g+")","gi"),l='<span class="'+c.matchClass+'">$1</span>',m=Array.isArray(d)&&d.hasOwnProperty("firstStartsAtTextStart")&&d.hasOwnProperty("lastEndsAtTextEnd");Array.isArray(d)?(i.firstStartsAtTextStart=d.firstStartsAtTextStart,i.lastEndsAtTextEnd=d.lastEndsAtTextEnd,m&&!d.firstStartsAtTextStart&&d.length>0&&(j+=c.continuationIndicator+" "),d.forEach(function(a,b){var c=a.replace(k,l);b>0&&(j+=" "),i.push(c),j+=c}),m&&!d.lastEndsAtTextEnd&&d.length>0&&(j+=" "+c.continuationIndicator),a.highlights=i):j=d.replace(k,l),a.highlightHTML=j}}),e},search:function(b){var c=d._search.call(a,b);return d.highlightMatches(b,c)}};d.init()},queryString={params:function(a){var b=a?a.split("?")[1]:window.location.search.slice(1),c={};if(b){b=b.split("#")[0];for(var d=b.split("&"),e=function(a){var b=(""+a).match(/\[(\d+)\]/);if(b&&2===b.length)return b[1]},f=function(a){return decodeURIComponent(a.replace(/\+/g," "))},g=0,h=d.length;g<h;g++){var i=d[g].split("="),j=e(i[0]),k=i[0].replace(/\[\d*\]/,""),l="undefined"==typeof i[1]||i[1];k=f(k.toLowerCase()),l=f(l),c[k]?("string"==typeof c[k]&&(c[k]=[c[k]]),"undefined"==typeof j?c[k].push(l):c[k][j]=l):c[k]=l}}return c}},search={config:void 0,json:void 0,index:void 0,raw:void 0,init:function(a){if(this.config=a||{},this.config.searchFileName=this.config.searchFileName||"search.json",lunr&&ajax){var b=document.getElementById("searchQuery");b&&(b.onkeyup=search.find),ajax.fetch(this.config.searchFileName,function(a,b){a?search.error(a):search.loadIndex(b.responseText)})}else this.error("Lunr not loaded")},addMessage:function(a,b,c){a=a||document.getElementById("searchResults"),c=c||"noResults";var d=document.createElement("p");d.appendChild(document.createTextNode(b||"No results found")),d.className=c,a.appendChild(d)},error:function(a){search.addMessage(null,a,"searchError"),console.error(a)},addPlugins:function(){this.lunrIdx.use(lunr_plugin_excerpt,this.raw),this.lunrIdx.use(lunr_plugin_highlight,this.raw,{bodyObjectName:"result",bodyPropertyName:"excerpts"})},checkForQueryString:function(){var a=queryString.params().q;if("object"==typeof a&&(a=a.pop()),a){var b=document.getElementById("searchQuery");b&&(b.value=a),this.find.call(b)}},loadIndex:function(a){if(a){try{a=JSON.parse(a)}catch(a){return void search.error(a)}this.lunrIdx=lunr.Index.load(a.idx),this.raw=a.raw,this.addPlugins(),this.checkForQueryString()}else this.error("No search data to load")},sendAnalytics:function(){var a=function(a){a&&ga("send",{hitType:"event",eventCategory:"search",eventAction:"query",eventLabel:a,transport:"beacon",nonInteraction:!0})};return this._debouncedAnalytics||(this._debouncedAnalytics=debounce(a,1e3)),"function"==typeof this._debouncedAnalytics?this._debouncedAnalytics:a},find:function(){var a=(""+this.value).trim();search.renderResults(search.lunrIdx.search(a),a),search.sendAnalytics()(a)},clearResults:function(){var a=document.getElementById("searchResults");if(a)for(;a.children.length;)a.removeChild(a.lastChild)},formatDate:function(a){return a=a?new Date(a):new Date,("0"+a.getDate()).slice(-2)+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear()},constructSingleResult:function(a,b){var c=this.raw[a.ref],d=document.createElement("div");d.className="result shadow";var e=document.createElement("a");e.appendChild(document.createTextNode(c.title)),e.href=c.url;var f=document.createElement("h3");f.appendChild(e);var g=document.createElement("div");if(g.className="meta",c.published){var h=document.createElement("p");h.appendChild(document.createTextNode(this.formatDate(c.published))),h.className="published",g.appendChild(h)}if(c.modified&&c.modified!=c.published){var i=document.createElement("p");i.appendChild(document.createTextNode(this.formatDate(c.modified))),i.className="modified",g.appendChild(i)}var j;c.tags&&(j=document.createElement("p"),j.appendChild(document.createTextNode(c.tags)),j.className="tags");var k=document.createElement("p");return k.innerHTML=a.highlightHTML,k.className="excerpt",d.appendChild(f),g.children&&d.appendChild(g),j&&d.appendChild(j),d.appendChild(k),d},renderResults:function(a,b){this.clearResults();var c=document.getElementById("searchResults");if(c)if((a||[]).length)for(var d=0,e=a.length;d<e;d++)c.appendChild(search.constructSingleResult(a[d],b));else b?this.addMessage(c):this.addMessage(c,"Please enter a search phrase","emptySearch")}};search.init(searchConfig);