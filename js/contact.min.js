function validate(a){try{var b=validateFields(a);if(b){var c=new XMLHttpRequest;c.open(a.method,a.action,!0),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(new FormData(a)),c.onerror=postError,c.onloadend=function(){if("undefined"!=typeof JSON){var b=JSON.parse(c.response);b.sent?postSuccess(a):postError()}else~c.response.indexOf('{"sent":true')?postSuccess(a):postError()}}}catch(a){postError()}return!1}function postError(){alert("Sorry there was a problem submitting the form.\nPlease try again.")}function postSuccess(a){ga&&ga("send",{hitType:"event",eventCategory:"contact-form",eventAction:"submit",eventLabel:a.email.value,transport:"beacon"});var b=getReasonField();b&&b.value&&(window.location.hash="reason="+b.value),window.location.pathname=window.location.pathname.replace(/\/contact\/?$/,"/contact/thankyou/")}function removeClass(a,b){if(a&&b){for(var c=a.className.split(" "),d=[],e=0,f=c.length;e<f;e++)b!=c[e].toLowerCase()&&d.push(c[e]);a.className=d.join(" ")}}function getReasonField(){for(var a,b=document.forms.contact.elements,c=0;void 0===a&&c<b.length;)"reason"==b[c].name.toLowerCase()&&(a=b[c]),c++;return a}function validateFields(a){var b,c=!1,d="invalid";try{if(a&&a.name){var e=document.forms[a.name].elements;if(e&&0<e.length){c=!0;for(var f=0,g=e.length;f<g;f++){var h=e[f],i=!0;if(removeClass(h,d),"text"==h.type.toLowerCase()||"tel"==h.type.toLowerCase()||"textarea"==h.tagName.toLowerCase())/^\s*$/.test(h.value)&&(i=!1);else if("select"==h.tagName.toLowerCase())h.selectedIndex<1&&(i=!1);else switch(h.type){case"email":break;case"submit":break;case"reset":break;default:i=!1}i||"required"!=h.getAttribute("required").toLowerCase()||(h.className+=(""!==h.className?" ":"")+d,b=b||h),c=c&&i}}}}catch(a){}try{b&&b.focus()}catch(a){}return c}try{var email=document.getElementById("email");email&&email.focus()}catch(a){}if(0<window.location.hash.length){var reason=getReasonField();if(reason){var matches=window.location.hash.match(/#(?:.+&)?reason=([\w-]+)?/),reasonValue;if(matches&&2<=matches.length&&(reasonValue=matches[1].toLowerCase()),reasonValue)for(var j=0,m=reason.children.length;j<m;j++){var option=reason.children[j];option.removeAttribute("selected"),option.value&&reasonValue==option.value.toLowerCase()&&option.setAttribute("selected","selected")}}window.location.hash=""}